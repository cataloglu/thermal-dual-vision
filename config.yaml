# Home Assistant Add-on Configuration
name: "Smart Motion Detector"
version: "1.0.0"
slug: "smart_motion_detector"
description: "AI-powered motion detection with RTSP input, YOLO and GPT-4 Vision"
url: "https://github.com/your-repo/smart-motion-detector"
arch:
  - amd64
  - aarch64
startup: application
boot: auto
init: false

# Options with defaults
options:
  rtsp_url: ""
  camera_fps: 5
  motion_sensitivity: 7
  motion_min_area: 500
  motion_cooldown: 5
  yolo_model: "yolov8n"
  yolo_confidence: 0.5
  yolo_classes:
    - person
    - car
    - dog
    - cat
  openai_api_key: ""
  screenshot_before_sec: 3
  screenshot_after_sec: 3
  mqtt_topic_prefix: "smart_motion"
  mqtt_discovery: true
  telegram_enabled: false
  telegram_bot_token: ""
  telegram_chat_id: ""
  log_level: "INFO"

# Schema validation
schema:
  rtsp_url: str
  camera_fps: int(1,30)
  motion_sensitivity: int(1,10)
  motion_min_area: int(100,10000)
  motion_cooldown: int(1,60)
  yolo_model: match(yolov8n|yolov8s|yolov8m)
  yolo_confidence: float(0.1,1.0)
  yolo_classes:
    - str
  openai_api_key: password
  screenshot_before_sec: int(1,10)
  screenshot_after_sec: int(1,10)
  mqtt_topic_prefix: str
  mqtt_discovery: bool
  telegram_enabled: bool
  telegram_bot_token: password?
  telegram_chat_id: str?
  log_level: list(DEBUG|INFO|WARNING|ERROR)

# Network
ports: {}

# Ingress - Required for Home Assistant add-on web UI
ingress: true
ingress_port: 8099
ingress_entry: /
panel_icon: "mdi:motion-sensor"
panel_title: "Smart Motion"

# Services
mqtt: true
auth_api: false
homeassistant_api: false

# Resources - Build locally
image: local/smart-motion-detector-{arch}
