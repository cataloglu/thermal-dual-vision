# Home Assistant Add-on Configuration
name: "Smart Motion Detector"
version: "1.0.0"
slug: "smart_motion_detector"
description: "AI-powered motion detection with YOLO and GPT-4 Vision"
url: "https://github.com/your-repo/smart-motion-detector"
arch:
  - amd64
  - aarch64
startup: application
boot: auto
init: false

# Options with defaults
options:
  camera_url: ""
  camera_type: "color"
  camera_fps: 5
  motion_sensitivity: 7
  motion_min_area: 500
  motion_cooldown: 5
  yolo_model: "yolov8n"
  yolo_confidence: 0.5
  yolo_classes:
    - person
    - car
    - dog
    - cat
  openai_api_key: ""
  screenshot_before_sec: 3
  screenshot_after_sec: 3
  mqtt_topic_prefix: "smart_motion"
  mqtt_discovery: true
  telegram_enabled: false
  telegram_bot_token: ""
  telegram_chat_id: ""
  log_level: "INFO"

# Options description
options_description:
  camera_url: "RTSP camera URL (required)."
  camera_fps: "Frame rate for capture (default: 5)."
  motion_sensitivity: "Motion sensitivity 1-10 (default: 7)."
  motion_min_area: "Minimum motion area in pixels (default: 500)."
  motion_cooldown: "Cooldown seconds between detections (default: 5)."
  yolo_model: "YOLO model name (default: yolov8n)."
  yolo_confidence: "YOLO confidence threshold (default: 0.5)."
  yolo_classes: "YOLO class list for detection."
  openai_api_key: "OpenAI API key for vision analysis (required)."
  screenshot_before_sec: "Seconds before event to capture (default: 3)."
  screenshot_after_sec: "Seconds after event to capture (default: 3)."
  mqtt_topic_prefix: "MQTT topic prefix (default: smart_motion)."
  mqtt_discovery: "Enable Home Assistant MQTT discovery."
  telegram_enabled: "Enable Telegram notifications."
  telegram_bot_token: "Telegram bot token (required if enabled)."
  telegram_chat_id: "Telegram chat ID(s) comma-separated (required if enabled)."
  log_level: "Log level (default: INFO)."

# Schema validation
schema:
  camera_url: url
  camera_type: list(color|thermal)
  camera_fps: int(1,30)
  motion_sensitivity: int(1,10)
  motion_min_area: int(100,10000)
  motion_cooldown: int(1,60)
  yolo_model: list(yolov8n|yolov8s|yolov8m)
  yolo_confidence: float(0.1,1.0)
  yolo_classes:
    - str
  openai_api_key: password
  screenshot_before_sec: int(1,10)
  screenshot_after_sec: int(1,10)
  mqtt_topic_prefix: str
  mqtt_discovery: bool
  telegram_enabled: bool
  telegram_bot_token: password?
  telegram_chat_id: str?
  log_level: list(DEBUG|INFO|WARNING|ERROR)

# Network
ports:
  8099/tcp: 8099
ports_description:
  8099/tcp: "Web UI / Health check"

# Ingress
ingress: true
ingress_port: 8099
panel_icon: "mdi:motion-sensor"
panel_title: "Smart Motion"

# Services
mqtt: true
auth_api: false
homeassistant_api: false

# Resources
image: "ghcr.io/your-repo/smart-motion-detector-{arch}"
