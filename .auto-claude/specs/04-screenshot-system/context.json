{
  "task_description": "3 ekran görüntüsü yakalama sistemi (önce/şimdi/sonra)",
  "files_to_create": [
    "src/screenshot_manager.py",
    "tests/test_screenshot_manager.py"
  ],
  "files_to_modify": [],
  "files_to_reference": [
    "src/config.py",
    "src/logger.py",
    "src/utils.py"
  ],
  "patterns": {
    "dataclass_pattern": "Use @dataclass decorator for data structures (see ScreenshotConfig in config.py)",
    "logging_pattern": "Use get_logger(name) from logger.py for component-specific logging",
    "encoding_pattern": "Use encode_frame_to_bytes() and encode_frame_to_base64() from utils.py for frame encoding",
    "async_pattern": "Use async/await for I/O operations (see RateLimiter in utils.py)",
    "type_hints": "All functions should have type hints for parameters and return values",
    "docstrings": "Use Google-style docstrings with Args/Returns sections"
  },
  "existing_implementations": {
    "description": "Found existing utility functions for frame encoding in utils.py",
    "relevant_files": [
      "src/utils.py - encode_frame_to_base64(), encode_frame_to_bytes()",
      "src/config.py - ScreenshotConfig dataclass already defined",
      "src/logger.py - get_logger() function for logging setup"
    ]
  },
  "technical_approach": {
    "ring_buffer": "Use collections.deque with maxlen for automatic overflow handling",
    "timestamp_storage": "Store (frame, timestamp) tuples in the deque",
    "async_waiting": "Use asyncio.sleep() for waiting after_seconds before capturing after frame",
    "thread_safety": "deque is thread-safe for append/pop operations",
    "memory_management": "Use cleanup_old() to prevent unbounded growth of screenshot sets"
  },
  "scoped_services": ["backend"]
}
