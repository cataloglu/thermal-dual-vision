{
  "files_to_modify": [],
  "files_to_create": [
    "src/mqtt_client.py",
    "tests/test_mqtt_client.py"
  ],
  "files_to_reference": [
    "src/config.py",
    "src/logger.py",
    "src/utils.py"
  ],
  "patterns": {
    "config_pattern": "Dataclasses for configuration (see MQTTConfig in config.py)",
    "async_pattern": "Use async/await with asyncio-mqtt (see retry_async and RateLimiter in utils.py)",
    "logging_pattern": "Use get_logger(name) from logger.py",
    "error_handling": "Use retry_async decorator for resilient async operations"
  },
  "existing_implementations": {
    "description": "MQTTConfig already exists in config.py with all needed fields. Project uses asyncio patterns with RateLimiter and retry_async decorator.",
    "relevant_files": ["src/config.py", "src/utils.py", "src/logger.py"],
    "dependencies": [
      "asyncio-mqtt>=0.16.0 (already in requirements.txt)",
      "paho-mqtt>=2.0.0 (already in requirements.txt)"
    ]
  },
  "mqtt_specifics": {
    "library": "asyncio-mqtt",
    "discovery_protocol": "Home Assistant MQTT Discovery",
    "topics": {
      "discovery_prefix": "homeassistant",
      "state_prefix": "smart_motion",
      "availability": "smart_motion/availability"
    },
    "entities": [
      "binary_sensor.smart_motion_motion",
      "sensor.smart_motion_threat_level",
      "sensor.smart_motion_confidence",
      "sensor.smart_motion_last_analysis"
    ]
  }
}
